{"version":3,"sources":["app.js"],"names":["ajax","XMLHttpRequest","NEWS_URL","CONTENT_URL","container","document","getElementById","content","createElement","endFlag","store","currentPage","feeds","getData","url","open","send","JSON","parse","response","makeFeeds","i","length","read","newsFeed","newsList","template","push","id","title","comments_count","user","points","time_ago","replace","join","innerHTML","newsDetail","location","hash","substr","newsContent","Number","makeComment","comments","called","commentString","router","routePath","indexOf","window","addEventListener"],"mappings":"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","file":"app.c328ef1a.js","sourceRoot":"..","sourcesContent":["const ajax = new XMLHttpRequest();\nconst NEWS_URL = 'https://api.hnpwa.com/v0/news/1.json';\nconst CONTENT_URL = 'https://api.hnpwa.com/v0/item/@id.json'; // @id 바꿔치키\n\nconst container = document.getElementById('root');\nconst content = document.createElement('div');\n//const ul = document.createElement('ul');\n\nlet endFlag;\n\nconst store = {\n    currentPage : 1, // 최근 페이지\n    feeds : [],\n\n}; \n\n\nfunction getData(url){\n    ajax.open('GET', url, false);\n    ajax.send();\n    return JSON.parse(ajax.response);\n}\n\nfunction makeFeeds(feeds){\n    for(let i = 0; i < feeds.length; i++){\n        feeds[i].read = false; \n    }\n\n    return feeds;\n}\n\nfunction newsFeed(){\n    let newsFeed = store.feeds;\n    const newsList = [];\n    let template = `\n        <div class=\"bg-gray-600 min-h-screen\">\n            <div class=\"bg-white text-xl\">\n                <div class=\"mx-auto px-4\">\n                    <div class=\"flex justify-between items-center py-6\">\n                        <div class=\"flex justify-start\">\n                            <h1 class=\"font-extrabold\">Hacker News</h1>\n                        </div>\n                        <div class=\"items-center justify-end\">\n                            <a href=\"#/page/{{__prev_page__}}\" class=\"text-gray-500\">\n                                Previous\n                            </a>\n                            <a href=\"#/page/{{__next_page__}}\" class=\"text-gray-500 ml-4\">\n                                Next\n                            </a>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class=\"p4 text-2xl text-gray-700\">\n                {{__news_feed__}}\n            </div>\n        </div>\n    `; // handlebars templates 적용해보기\n\n    if(newsFeed.length === 0){\n       newsFeed = store.feeds = makeFeeds(getData(NEWS_URL)); // 두줄짜리 코드 한줄로\n    }\n\n    for(let i = (store.currentPage - 1) * 10; i < store.currentPage * 10; i++){\n        //const div = document.createElement('div');\n        \n\n        newsList.push(`\n            <div class=\"p-6 ${newsFeed[i].read ? 'bg-red-500' : 'bg-white'} mt-6 rounded-lg shadow-md transition-colors duration-500 hober:bg-green-100\">\n                <div class=\"flex\">\n                    <div class=\"flex-auto\">\n                        <a href = #/show/${newsFeed[i].id}>${newsFeed[i].title}</a>\n                    </div>\n                    <div>\n                        <div class=\"text-center text-sm\">${newsFeed[i].comments_count}</div>\n                    </div>\n                </div>\n                <div class=\"flex mt-3\">\n                    <div class=\"grid grid-cols-3 text-sm text-gray-500\">\n                        <div><i class=\"fas fa-user mr-1\"></i>${newsFeed[i].user}</div>\n                        <div><i class=\"fas fa-heart mr-1\"></i>${newsFeed[i].points}</div>\n                        <div><i class=\"far fa-clock mr-1\"></i>${newsFeed[i].time_ago}</div>\n                    </div>\n                </div>\n            </div>\n        `);\n    }\n\n    \n    template = template.replace('{{__news_feed__}}', newsList.join('')); //container.innerHTML = newsList.join(''); // 조인 사용시 배열안의 문자열들을 합쳐서 반환해준다, 배열 인덱스 사이의 구분자(default = ,)가 존재하기때문에 없애줘야하는데,, join 함수의 첫번째 파라미터는 구분자를 어떤것을 사용할지 정하는 부분. 그렇기때문에 '' 라는 공백을 넣으면 문자열만을 반환해준다.\n    template = template.replace('{{__prev_page__}}', store.currentPage > 1 ? store.currentPage -1 : 1);\n    template = template.replace('{{__next_page__}}', store.currentPage + 1);\n    \n    container.innerHTML = template;\n}\n\n\nfunction newsDetail(){\n\n    //console.log(location.hash); //id가져오기 (브라우저가 기본으로 제공해주는 객체)\n    const id = location.hash.substr(7);\n    const newsContent = getData(CONTENT_URL.replace('@id', id));\n    let template = `\n        <div class=\"bg-gray-600 min-h-screen pb-8\">\n            <div class=\"bg-white text-xl\">\n                <div class=\"mx-auto px-4\">\n                    <div class=\"flex justify-between items-center py-6\">\n                        <div class=\"flex justify-start\">\n                            <h1 class=\"font-extrabold\">Hacker News</h1>\n                        </div>\n                        <div class=\"items-center justify-end\">\n                            <a href=\"#/page/${store.currentPage}\" class=\"text-gray-500\">\n                                <i class=\"fa fa-times\"></i>\n                            </a>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class=\"h-full border rounded-xl bg-white m-6 b-4\">\n                <h2>${newsContent.title}</h2>\n                <div class=\"text-gray-400 h-20\">\n                    ${newsContent.content}\n                </div>\n\n                {{__comments__}}\n\n            </div>\n        </div>\n    `;\n\n    for(let i = 0; i < store.feeds.length; i++){\n        if (store.feeds[i].id === Number(id)){\n            store.feeds[i].read = true;\n            break;\n        }\n    }\n\n    function makeComment(comments, called = 1){\n        const commentString =[];\n\n        for(let i = 0; i < comments.length; i++){\n            commentString.push(`\n                <div style=\"padding-left : ${called * 40}px;\" class=\"mt-4\">\n                    <div class=\"text-gray-400\">\n                        <i class=\"fa fa-sort-up mr-2\"></i>\n                        <strong>${comments[i].user}</strong> ${comments[i].time_ago}\n                    </div>\n                    <p class=\"text-gray-700\">${comments[i].content}</p>\n                </div>\n            `);\n            if(comments[i].comments.length > 0){\n                commentString.push(makeComment(comments[i].comments, called + 1));\n            }\n        }\n\n        return commentString.join('');\n    }\n\n    container.innerHTML = template.replace('{{__comments__}}', makeComment(newsContent.comments));\n\n}\n\nfunction router(){\n    const routePath = location.hash; \n\n    if(routePath === ''){// location 해쉬에 #이 들어오면 빈 값 반환이 되어 조건문이 동작하는 것\n        newsFeed();\n    } else if (routePath.indexOf('#/page/') >= 0) { // 문자열 값 안에 존재하면 위치정보, 없으면 -1\n        store.currentPage = Number(routePath.substr(7));\n        newsFeed();\n    } else {\n        newsDetail();\n    }\n}\n\nwindow.addEventListener('hashchange', router);\n\nrouter();\n\n"]}